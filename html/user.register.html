<tal:block metal:use-macro="templates/page/macros/icing">
<tal:block metal:fill-slot="title" tal:omit-tag="true">New User Registration</tal:block>
<tal:block metal:fill-slot="content" tal:omit-tag="true">
  
  <tal:block tal:condition="options/ok_message | nothing">
    <p>You can <a href="home">log in</a> now.</p>
  </tal:block>

  <tal:block tal:condition="not:options/ok_message | nothing" tal:omit-tag="true">
    <p>
      Please fill in the following form and submit it.
    </p>

    <form method="POST" enctype="multipart/form-data" tal:attributes="action context/designator">
      <input type="hidden" name="@template" value="register">
      <p>
        <input type="hidden" name="@required" value="username">
        <label><strong>Login name</strong> (only lowercase English letters allowed)<strong>:</strong><br>
          <span tal:replace="structure context/username/field"/>
        </label><br>
        <label><strong>Password:</strong><br><span tal:replace="structure context/password/field"/></label><br>
        <label><strong>Confirm password:</strong><br><span tal:replace="structure context/password/confirm"/></label><br>
      </p>
      <p>
        <em>Providing your e-mail address is optional, but if we don't know it we
          won't be able to reset your password in case you forget it.</em><br>
        <label>Email Address:<br>
          <span tal:replace="structure context/address/field"/></label><br>
      </p>
      <p>
        <em>The following items are completely optional.</em><br>
        <label tal:omit-tag="not:context/realname/is_edit_ok">Name:<br><span tal:replace="structure context/realname/field"/></label><br>
        <label tal:omit-tag="not:context/phone/is_edit_ok">Phone:<br><span tal:replace="structure context/phone/field"/></label><br>
        <label tal:omit-tag="not:context/organisation/is_edit_ok">Organization:<br><span tal:replace="structure context/organisation/field"/></label><br>
        <label tal:omit-tag="not:context/alternate_addresses/is_edit_ok">Alternate e-mail addresses:<br>
          <span tal:replace="structure context/alternate_addresses/multiline"/>
        </label>
      </p>
      <p>
        <input type="hidden" name="@action" value="new">
        <input type="submit" name="submit" value="Register">
      </p>
    </form>
  </tal:block>
</tal:block>
</tal:block>
