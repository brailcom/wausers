<tal:block metal:use-macro="templates/page/macros/icing">
<tal:block metal:fill-slot="title" tal:omit-tag="true">New User Registration</tal:block>
<tal:block metal:fill-slot="content" tal:omit-tag="true">
  
  <tal:block tal:condition="options/ok_message | nothing">
    <p>You can <a href="home">log in</a> now.</p>
  </tal:block>

  <tal:block tal:condition="not:options/ok_message | nothing" tal:omit-tag="true">
    <p>
      Please fill in the following form and submit it.
    </p>

    <form method="POST" enctype="multipart/form-data" tal:attributes="action context/designator">
      <input type="hidden" name="@template" value="register">
      <p>
        <input type="hidden" name="@required" value="username">
        <label>Login name (only lowercase English letters allowed):<br>
          <span tal:replace="structure context/username/field"/>
        </label><br>
        <label>Password:<br><span tal:replace="structure context/password/field"/></label><br>
        <label>Confirm password:<br><span tal:replace="structure context/password/confirm"/></label><br>
        <label>Email Address (optional):<br><span tal:replace="structure context/address/field"/></label><br>
        <em>Providing your e-mail address is optional, but if we don't know it we
          won't be able to reset your password in case you forget it.</em>
      </p>
      <p tal:content="structure context/submit"/>
    </form>
  </tal:block>
</tal:block>
</tal:block>
